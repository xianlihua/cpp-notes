## C 运算符

- 求字节数运算符:  `sizeof`
- 下标运算符 `[ ]`
- 赋值运算符 `=`
- 算术运算符 `＋ － *  ／ %`
- 关系运算符 `< > == >= <= !=`
- 逻辑运算符 `! && ||`
- 条件运算符 `?  :`
- 逗号运算符 `，`
- 位运算符 `>>  ～ | ^ &`
- 指针运算符 `*，&`
- 强制类型转换运算符:  `(类型)`
- 分量运算符 `．→`

## 赋值运算符(=)

给赋值号左边的变量赋值右边的变量或表达式的值。

**两边类型不同的类型转换**

强制转换右侧数据为左侧类型后赋值给左侧变量

```c++
int main() {
    int int_i = 64.12345;
    char char_i = int_i;
    float float_i = char_i;
    bool bool_i = float_i;

    // showpoint 显示小数位，暂不深究
    // output: 64 @ 64.0000 1
    cout << showpoint << int_i << " " << char_i << " " << float_i << " " << bool_i << endl;
    return 0;
}
```

**长数赋值给短数**

直接截取长数的低n位送给短数，短数对这低n位进行解析

```c++
int main () {
    // 32位: 0000 ... 0011 0110 0001
    int i = 0x361;

    // 保留低8位: 0110 0001
    // 0x61
    char ch = i;

    // 依照 ASCII 码表: 十六进制的 61 对应的字符为 a
    cout << ch << endl;
    return 0;
}
```

**短数赋给长数** 数值不变。

**符号位的赋值处理**

  - 有符号复制给无符号，符号位当作数字使用
  - 反之，无符号数值赋值给有符号变量，直接赋值，数字当作符号位

## 算术运算符及计算过程的类型转换

**算数运算符的优先级**

  - \* / % 的优先级是相同的，且高于 + - 运算符
  - 两个运算数或数值表达式进行算术运算，其最终的数据类型取决于两个数的类型中谁的上限容量更大(个人理解)

**思考**

```c++
short s; // 16 bit
int i; // 32 bit
float f; // 32 bit
double d; // 64 bit (取决于编译器)
unsigned u; // 32 bit > int

// 下面表达式最终返回值的类型应该为 double
123 % s + (i + '@') + i * u – f / d
```

## ++ -- 运算符

- 前置先赋值再计算，后置先计算再赋值
- ++ 与 -- 运算符只能用于**变量**，不能用于表达式

## 关系运算符

- \> \>= < <= 运算符优先级相同，且高于 == != 运算符
- 关系运算表达式的返回值为布尔类型，非真即假

```c++
// 相当于 X = ((1 + 2 % 3 * 4) > (5 / 6) - 7) == 8
X = 1 + 2 % 3 * 4 > 5 / 6 - 7 == 8 // output: 0
```

## 逻辑运算符(与/或/非)

- 三个逻辑运算符的优先级均不等，从高到低依次为: ! > && > ||，其中逻辑非(!)优先级比算术运算符优先级更高，逻辑与(&&)和逻辑或(||)优先级比关系运算符更低

```c++
int result = !a && b || x > y && c + 1;
```

**思考题**

```c++
#include <iostream>
using namespace std;
int main () {
    int a = 0, b = 0;
    a = 5 > 3 && 2 || 8 < 4 - (b = !0);
    cout << a << " " << b << endl; // output: 1 0
    return 0
}
```

由上面的思考题可知，逻辑运算符不一定将其两端的表达式都进行计算，除非如不计算便不能确定整个表达式的值。

**另一个思考题**

```c++
int main () {
    int i = 0, a = 1, b = 2, c = 3;
    i = ++a || ++b || ++c;

    cout << i << " " << a << " " << b << " " << c << endl; // output: 1 2 2 3
    return 0;
}
```

注意: 逻辑运算表达式返回布尔值，所以上例不会返回 2 2 2 3

## 逗号运算符(,)

- 连接多个表达式，返回最后一个表达式的值

## 条件运算符(三目运算符)

> 表达式1 ? 表达式2 : 表达式3

相当于(伪码):

```c++
if (表达式1) {
    表达式2
} else {
    表达式3
}
```

## 强制类型转换运算符

注意一点，强制类型转换运算符将表达式求值且转换值，并不改变原有变量的类型

```c++
(float)(5 / 3); // output: 1
```

为什么是 1 ？因为 `5/3` 按照 int 型进行计算，其返回值为 int 型
